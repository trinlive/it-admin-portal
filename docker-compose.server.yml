version: '3.8'

services:
  it-admin-portal-app:
    image: ghcr.io/bic-group/it-admin-portal:latest  # ‡∏´‡∏£‡∏∑‡∏≠ build: . ‡∏ñ‡πâ‡∏≤‡πÉ‡∏ä‡πâ Git
    container_name: it-admin-portal
    restart: always
    environment:
      - NODE_ENV=production
      - PORT=3001
      
      # üëá Database (‡∏£‡∏±‡∏ö‡∏Ñ‡πà‡∏≤‡∏à‡∏≤‡∏Å Env)
      - DB_HOST=it-log-db
      - DB_DIALECT=mysql
      - DB_NAME=${DB_NAME}
      - DB_USER=${DB_USER}
      - DB_PASS=${DB_PASS}
      
      # üëá AD Config (‡∏£‡∏±‡∏ö‡∏Ñ‡πà‡∏≤‡∏à‡∏≤‡∏Å Env)
      - AD_URL=ldap://samba-ad
      - AD_BASE_DN=${AD_BASE_DN}
      - AD_USER=${AD_USER}
      - AD_PASS=${AD_PASS}
      
      # üëá Google OAuth (‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏Ç‡∏≤‡∏î‡∏´‡∏≤‡∏¢‡πÑ‡∏õ! ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏ï‡∏¥‡∏°‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ‡∏Ñ‡∏£‡∏±‡∏ö)
      - GOOGLE_CLIENT_ID=${GOOGLE_CLIENT_ID}
      - GOOGLE_CLIENT_SECRET=${GOOGLE_CLIENT_SECRET}
      - GOOGLE_CALLBACK_URL=${GOOGLE_CALLBACK_URL}
      - ALLOWED_EMAILS=${ALLOWED_EMAILS}
      - SESSION_SECRET=${SESSION_SECRET}

    networks:
      - app-network
      - cf-network

networks:
  app-network:
    external: true
  cf-network:
    external: true